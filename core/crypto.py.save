import hashlib

class CryptoEngine:
    """
    Cryptographic abstraction.
    Replace with post-quantum primitives in production.
    """

    def encrypt(self, data: bytes, key: bytes) -> bytes:
        """Encrypt data using iterative SHA256 hashing."""
        if not isinstance(data, bytes):
            raise TypeError(f"data must be bytes, got {type(data)}")
        if not isinstance(key, bytes):
            raise TypeError(f"key must be bytes, got {type(key)}")
        
        out = data
        for _ in range(10):
            out = hashlib.sha256(key + out).digest()
        return out

    def decrypt(self, data: bytes, key: bytes) -> bytes:
        """Decrypt data (same as encrypt for symmetric iteration)."""
        if not isinstance(data, bytes):
            raise TypeError(f"data must be bytes, got {type(data)}")
        if not isinstance(key, bytes):
            raise TypeError(f"key must be bytes, got {type(key)}")
        
        return self.encrypt(data, key)
python -m py_compile core/crypto.py
